
<!-- client -->
<table id="main-table" class="table table-striped table-bordered table-hover" width="100%">
	<thead>
		<tr>
			<th width="8%" class="" data-hide="phone"><i class="fa fa-fw text-muted fa-hashtag hidden-sm hidden-xs"/> ID</th>
      <th width="20%" class="" data-class="expand">名稱</th>
      <!--
      <th width="" class="" data-hide="always">SKU</th>
      <th width="" class="" data-hide="always">UPC</th>
      <th width="" class="" data-hide="always">EAN</th>
      <th width="" class="" data-hide="always">JAN</th>
      <th width="" class="" data-hide="always">ISBN</th>
      <th width="" class="" data-hide="always">MPN</th>
      <th width="" class="" data-hide="always">Location</th>
      -->
      <th width="8%" class="">數量</th>
      <th width="" class="image" data-hide="phone">圖片</th>
      <th width="" class="shipping" data-hide="always">是否可運送</th>
      <th width="8%" class="" data-hide="">價格</th>
			<th width="" class="" data-hide="always">點數</th>
      <th width="" class="" data-hide="always">釋出日期</th>
      <th width="" class="" data-hide="always">重量</th>
      <th width="" class="" data-hide="always">長度</th>
      <th width="" class="" data-hide="always">寬度</th>
      <th width="" class="" data-hide="always">高度</th>
      <th width="" class="subtract" data-hide="always">賣出時減少</th>
      <th width="8%" class="">最小存量</th>
      <th width="8%" class="" data-hide="phone">排序</th>
      <th width="8%" class="" data-hide="phone">公開狀態</th>
      <th width="8%" class="" data-hide="phone">瀏覽數</th>
      <th width="" class="" data-hide="always">建立時間</th>
      <th width="" class="" data-hide="always">更新時間</th>
      <th width="" class="supplier" data-hide="always">供應商</th>
      <th width="" class="category" data-hide="always">產品分類</th>
			<th width="10%" class="operate" data-hide="phone,tablet">操作</th>
		</tr>
	</thead>
	<!-- client only -->
	<tbody>
		<tr v-for="item in data.items">
      <td>{{ item.id }}</td>
			<td><a href="/admin/#/admin/{{modelName}}/show/{{item.id}}">{{ item.model }}</a></td>
			<td>{{item.sku }}</td>
      <td>{{ item.upc }}</td>
      <td>{{ item.ean }}</td>
      <td>{{ item.jan }}</td>
      <td>{{ item.isbn }}</td>
      <td>{{ item.mpn }}</td>
      <td>{{ item.location }}</td>
      <td>{{ item.quantity }}</td>
      <td>{{ item.image }}</td>
      <td>{{ item.shipping }}</td>
      <td>{{ item.price }}</td>
      <td>{{ item.points }}</td>
      <td>{{ item.dateAvailable }}</td>
      <td>{{ item.weight }}</td>
      <td>{{ item.length }}</td>
      <td>{{ item.width }}</td>
      <td>{{ item.height }}</td>
      <td>{{ item.subtract }}</td>
      <td>{{ item.minimum }}</td>
      <td>{{ item.sortOrder }}</td>
      <td>{{ item.publish }}</td>
      <td>{{ item.viewed }}</td>
      <td>{{ item.createdAt }}</td>
      <td>{{ item.updatedAt }}</td>
      <td>{{ item.Supplier.name }}</td>
      <td>{{ item.Categories[0].CategoryDescription.name }}</td>
			<td align="center" style="cursor: pointer;">
				<div class="row">
					<a class="btn btn-default btn-xs" role="button" v-on:click="show(item.id)">
						<i class="fa-fw fa fa-eye text-muted" />
					</a>
					<a class="btn btn-default btn-xs" role="button" v-on:click="edit(item.id)">
						<i class="fa-fw fa fa-pencil-square-o text-muted"/>
					</a>
				</div>
			</td>
		</tr>
	</tbody>
 </table>


<script type="text/javascript">
	var pagefunction = function() {

		// server only
		var columns = [
      { "data": "id" },
      { "data": "model"},
      // { "data": "sku"},
      // { "data": "upc"},
      // { "data": "ean"},
      // { "data": "jan"},
      // { "data": "isbn"},
      // { "data": "mpn"},
      // { "data": "location"},
      { "data": "quantity"},
      { "data": "image"},
      { "data": "shipping"},
      { "data": "price"},
      { "data": "points"},
      { "data": "dateAvailable"},
      { "data": "weight"},
      { "data": "length"},
      { "data": "width"},
      { "data": "height"},
      { "data": "subtract"},
      { "data": "minimum"},
      { "data": "sortOrder"},
      { "data": "publish"},
      { "data": "viewed"},
      { "data": "createdAt"},
      { "data": "updatedAt"},
      { "data": null }, //supplier
      { "data": null },
			{ "data": null }
		]

		// server only
		var columnDefs = [
      {
        "targets": 'no-sort',
        "orderable": false,
      },
      {
        "searchable": false,
        "targets": 5,
        "render": function (data, type, row) {
          return '<td> $' + row.formatPrice + '</td>';
        }
      },
      {
        "searchable": false,
        "targets": 17,
        "render": function (data, type, row) {
          return '<td>' + row.createdDateTime.dateTime + '</td>';
        }
      },
      {
        "searchable": false,
        "targets": 18,
        "render": function (data, type, row) {
          return '<td>' + row.updatedDateTime.dateTime + '</td>';
        }
      },
      {
        "targets": 'image',
        "render": function (data, type, row) {
          if(data){
            return `<div class="text-center"><img width="60" src='${data}'/></div>`;
          }
          return '';
        }
      },
      {
        "searchable": false,
        "targets": 'shipping',
        "render": function (data, type, row) {
          if(data){
            return '<td>' + '是' + '</td>';
          }
          return '<td>'+ '否' +'</td>';
        }
      },
      {
        "searchable": false,
        "targets": 'subtract',
        "render": function (data, type, row) {
          if(data){
            return '<td>' + '是' + '</td>';
          }
          return '<td>'+ '否' +'</td>';
        }
      },
      {
        "searchable": false,
        "targets": 'supplier',
        "render": function (data, type, row) {
          if(row.suppliersId){
            return '<td>' + row.suppliersNameArray + '</td>';
          }
          return '<td></td>';
        }
      },
      {
        "searchable": false,
        "targets": 'category',
        "render": function (data, type, row) {
          var output = '';
          for( index in row.Categories ) {
            output += `${row.Categories[index].CategoryDescription.name}, `
          }
          return '<td>' + output + '</td>';
        }
      },
			{
				"targets"  : 'operate',
				"orderable": false,
				"searchable": false,
				"render": function ( data, type, row ) {
					var colBody =
					'<div class="row-action-buttons hidden-xs hidden-sm">'+
						'<a name="showDataButton" class="btn btn-default btn-xs" role="button" data-id="'+row.id+'">'+
							'<i class="fa-fw fa fa-eye text-muted" />'+
						'</a>'+
						'<a name="editDataButton" class="btn btn-default btn-xs" role="button" data-id="'+row.id+'">'+
							'<i class="fa-fw fa fa-pencil-square-o text-muted"/>'+
						'</a>'+
					'</div>';
					return colBody;
				}
			},
		]
		var serverSidePaging = <%= (data.serverSidePaging != null)?data.serverSidePaging:false %>;
		<%- include vue.ejs %>
		appMain.$mount("#main-index");
		appMain.loadItems(appMain.renderTable);
	};
</script>
